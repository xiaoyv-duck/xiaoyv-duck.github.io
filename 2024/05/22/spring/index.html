<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 7.2.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha256-XOqroi11tY4EFQMR9ZYwZWKj5ZXiftSx36RRuC3anlA=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Pisces","darkmode":true,"version":"8.20.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="SpringBoot注解学习">
<meta property="og:type" content="article">
<meta property="og:title" content="SpringBoot注解">
<meta property="og:url" content="http://example.com/2024/05/22/spring/index.html">
<meta property="og:site_name" content="金阁寺">
<meta property="og:description" content="SpringBoot注解学习">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2024-05-22T13:25:00.000Z">
<meta property="article:modified_time" content="2024-05-22T04:23:43.653Z">
<meta property="article:author" content="北斗">
<meta property="article:tag" content="Java元注解">
<meta property="article:tag" content="SpringBoot注解">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/2024/05/22/spring/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://example.com/2024/05/22/spring/","path":"2024/05/22/spring/","title":"SpringBoot注解"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>SpringBoot注解 | 金阁寺</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">金阁寺</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E6%B3%A8%E8%A7%A3%EF%BC%9F"><span class="nav-number">1.</span> <span class="nav-text">什么是注解？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SpringBoot%E5%B8%B8%E7%94%A8"><span class="nav-number">2.</span> <span class="nav-text">SpringBoot常用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#SpringBootApplication"><span class="nav-number">2.1.</span> <span class="nav-text">@SpringBootApplication</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Service"><span class="nav-number">2.2.</span> <span class="nav-text">@Service</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#RestController"><span class="nav-number">2.3.</span> <span class="nav-text">@RestController</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Repository"><span class="nav-number">2.4.</span> <span class="nav-text">@Repository</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Autowired"><span class="nav-number">2.5.</span> <span class="nav-text">@Autowired</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ExceptionHandler"><span class="nav-number">2.6.</span> <span class="nav-text">@ExceptionHandler</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Around-Aspect-Before"><span class="nav-number">2.7.</span> <span class="nav-text">@Around&#x2F;@Aspect&#x2F;@Before</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ControllerAdvice"><span class="nav-number">2.8.</span> <span class="nav-text">@ControllerAdvice</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#MapperScan"><span class="nav-number">2.9.</span> <span class="nav-text">@MapperScan</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#NotBlank"><span class="nav-number">2.10.</span> <span class="nav-text">@NotBlank</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B3%A8%E8%A7%A3"><span class="nav-number">3.</span> <span class="nav-text">自定义注解</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#END"><span class="nav-number">4.</span> <span class="nav-text">END</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">北斗</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">5</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/05/22/spring/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="北斗">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="金阁寺">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="SpringBoot注解 | 金阁寺">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          SpringBoot注解
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2024-05-22 21:25:00 / 修改时间：12:23:43" itemprop="dateCreated datePublished" datetime="2024-05-22T21:25:00+08:00">2024-05-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Springboot3-%E5%BE%AE%E6%9C%8D%E5%8A%A112306/" itemprop="url" rel="index"><span itemprop="name">Springboot3-微服务12306</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Springboot3-%E5%BE%AE%E6%9C%8D%E5%8A%A112306/%E6%B3%A8%E8%A7%A3%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">注解学习</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><p>SpringBoot注解学习</p>
<span id="more"></span>

<p>在学习SpringBoot注解之前，咱们先简单学一下Java注解</p>
<h3 id="什么是注解？"><a href="#什么是注解？" class="headerlink" title="什么是注解？"></a>什么是注解？</h3><p>注解首次出现在Java1.5，是Java编程语言中的一种元数据机制，提供了一种向源代码中添加额外信息的方式。这些信息并不直接影响程序的执行逻辑，但可以被编译器、开发工具和其他程序在编译时、运行时或部署时解析和使用，以实现特定的目的。</p>
<p>Java 定义了11个注解，6个在<code>java.lang</code>，5个在<code>java.lang.annotation</code></p>
<p><code>java.lang</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@Override  //指示正在重写父类中的方法。</span><br><span class="line">@Deprecated  //标记类、方法、变量等已经被弃用。</span><br><span class="line">@SuppressWarnings  //关闭编译器的警告信息。</span><br><span class="line">@SafeVarargs  //指示可变参数是安全的，即不会对运行时类型检查造成影响。</span><br><span class="line">@FunctionalInterface  //指示一个接口是一个函数式接口，即只包含一个抽象方法的接口。</span><br><span class="line">@Native  //指示一个方法是一个本地方法，即该方法的实现是用非 Java 语言写的。</span><br></pre></td></tr></table></figure>

<p><code>java.lang.annotation</code>：</p>
<p>这一部分的注解也叫做元注解——作用在其他注解的注解。</p>
<p><strong>@Documented：</strong>为其他注解添加该注解后就会把其他注解写进<code>JavaDoc</code>文档，不仅能够看到使用注解的元素，还能看到注解的属性及其值。</p>
<p><strong>@Retention：</strong>标识注解的保存策略，有三个参数<code>SOURCE、CLASS、RUNTIME</code>。</p>
<p>源码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@Documented</span><br><span class="line">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="line">@Target(ElementType.ANNOTATION_TYPE)</span><br><span class="line">public @interface Retention &#123;</span><br><span class="line">    RetentionPolicy value();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>@Documented</code>标识这个注解应该被包含在JavaDoc中</p>
<p><code>@Retention</code>参数为<code>RUNTIME</code>，在<code>Retention</code>注解内部定义了一个<code>RetentionPolicy</code>类型值<code>value()</code>，能且仅能传入一个参数。</p>
<p><code>RetentionPolicy</code>为枚举类型：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public enum RetentionPolicy &#123;</span><br><span class="line">    SOURCE,	   //注解仅在源代码中存在，在编译时就会被丢弃，不会保留在JVM中。</span><br><span class="line">    CLASS,  	 //注解在源代码和字节码文件中都存在，但在运行时JVM会丢弃。</span><br><span class="line">    RUNTIME	 //注解在源代码、字节码文件和运行时JVM中都存在。</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>@Target：</strong> 定义注解可以标识在哪</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@Documented</span><br><span class="line">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="line">@Target(ElementType.ANNOTATION_TYPE)</span><br><span class="line">public @interface Target &#123;</span><br><span class="line">    ElementType[] value();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这里注解内部声明了一个<code>ElementType</code>的数组，也就意味着可以传多个参数</p>
<p><code>ElementType</code>枚举类型：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public enum ElementType &#123;</span><br><span class="line">    TYPE,	//可以应用于类、接口（包括注解类型）、枚举或记录（record，Java16引入的新特性）的声明。</span><br><span class="line">    FIELD,	//注解可以应用于字段声明，包括枚举常量。</span><br><span class="line">    METHOD,	//可以应用于方法声明。</span><br><span class="line">    PARAMETER,	//可以应用于参数声明。</span><br><span class="line">    CONSTRUCTOR,	//可以应用于构造器声明。</span><br><span class="line">    LOCAL_VARIABLE,	//应用于局部变量的声明。</span><br><span class="line">    ANNOTATION_TYPE,	//注解类型</span><br><span class="line">    PACKAGE,	////应用于包声明。</span><br><span class="line">    TYPE_PARAMETER,	//应用于类型参数声明（Java8引入）</span><br><span class="line">    TYPE_USE,	//任何类型</span><br><span class="line">    MODULE,		//模块声明（Java9引入）</span><br><span class="line">    RECORD_COMPONENT; 	//应用于记录组件声明（Java16引入）</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>@Inherited：</strong>标记注解为可继承的，继承最简单的作用就是简化操作。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@Documented</span><br><span class="line">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="line">@Target(ElementType.ANNOTATION_TYPE)</span><br><span class="line">public @interface Inherited &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这里继承只能继承被标注的注解，标记注解本身继承的也无法继承。举个栗子：</p>
<p><code>SpringBootApplication</code>有<code>@Inherited</code>注解，而<code>MapperScan</code>没有</p>
<p>那么我们创建一个注解，<code>SpringBootApplication</code>便可以继承，但<code>MapperScan</code>不可以，包括其他在<code>SpringBootApplication</code>中继承的其他注解也无法被继承。</p>
<p>如图所示：</p>


<p>同时，在类和子类的继承上，被@Inherited标识的注解标识的类，它的直接或间接子类也会继承这个注解。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">import java.lang.annotation.Inherited;</span><br><span class="line">import java.lang.annotation.Retention;</span><br><span class="line">import java.lang.annotation.RetentionPolicy;</span><br><span class="line">@Inherited</span><br><span class="line">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="line">@interface Annotation &#123; &#125;</span><br><span class="line"></span><br><span class="line">@Annotation</span><br><span class="line">class A&#123; &#125;</span><br><span class="line">class B extends A&#123; &#125;</span><br><span class="line">class C extends B&#123; &#125;</span><br><span class="line">class D&#123; &#125;</span><br><span class="line">public class test &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        System.out.println(A.class.isAnnotationPresent(Annotation.class));</span><br><span class="line">        System.out.println(B.class.isAnnotationPresent(Annotation.class));</span><br><span class="line">        System.out.println(C.class.isAnnotationPresent(Annotation.class));</span><br><span class="line">        System.out.println(D.class.isAnnotationPresent(Annotation.class));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>结果：<code>true true true false</code>。即都继承了<code>@Annotation</code></p>
<p>总结：能不能继承只看有没有被<code>@Inherited</code>标记……吗？</p>
<p>让我们再考虑一些东西：</p>
<p>1、注解仅在<code>SOURCE</code>——源码级别保留</p>
<p>2、注解在<code>CLASS</code>——字节码中保留</p>
<p>3、Spring框架中，当<code>MyController</code>类被<code>@Controller</code>注解标记时，<code>MyController</code>的子类也是控制器吗？</p>
<p>我们一个一个来考虑：</p>
<p>1、在源码级别保留——假如有一个注解<code>@A</code>，它只在源码中保留，那么注解在被编译成字节码后注解还在吗？</p>
<p>​	答：不在了，因为它标注了仅在源码级别保留。而JVM执行的是字节码，此时注解就没有了。</p>
<p>2、在字节码中保留——虽然没有保留到JVM，但在<code>.class</code>文件中是可见的，也就意味着在类加载到JVM之前，可以使用各种工具或库来分析这些注解。</p>
<p>3、<code>MyController</code>的子类也是控制器。在<code>Spring</code>的上下文中，<code>Spring</code>会模拟一种继承行为，即使在标准的Java反射中这并不成立。</p>
<p>结论：能不能继承还要考虑其他因素，只看有没有被<code>@Inherited</code>标记这句话并不完全对。在Java反射API 中，只有<code>RUNTIME</code>级别的注解才能在运行时被检测到，并且只有当这些注解被标记为<code>@Inherited</code>时，它们才可能表现为“继承”。</p>
<p><strong>@Repeatable：</strong>这个注解于Java8引入。作用为允许在同一个声明（如类、方法、参数等）上使用同一个注解多次。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@Documented</span><br><span class="line">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="line">@Target(ElementType.ANNOTATION_TYPE)</span><br><span class="line">public @interface Repeatable &#123;</span><br><span class="line">    Class&lt;? extends Annotation&gt; value();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>有一个参数<code>value</code>，属性的类型是类，这个类是 <code>Annotation</code> 类型的扩展，并且使用了通配符 <code>?</code> 来表示这个类可以是任何注解类型的类。</p>
<p><code>@Repeatable</code>注解自身必须用在另一个注解上，指明这个注解是可重复的，并指定一个容器注解类型，用于聚合重复的注解实例。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">// 定义一个可重复的注解</span><br><span class="line">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="line">@interface A &#123;</span><br><span class="line">    String value();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 定义一个容器注解，用于聚合重复注解A</span><br><span class="line">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="line">@Documented</span><br><span class="line">@Target(ElementType.TYPE)</span><br><span class="line">@Repeatable(Annotation.class)</span><br><span class="line">@interface Annotation &#123;</span><br><span class="line">    A[] value();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 使用可重复注解</span><br><span class="line">public class MyClass &#123;</span><br><span class="line">    @A(&quot;A1&quot;)</span><br><span class="line">    @A(&quot;A2&quot;)</span><br><span class="line">    public void myMethod() &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>元注解就简单学习到这里，接下来我们开始<code>SpringBoot</code>常用注解的学习。</p>
<h3 id="SpringBoot常用"><a href="#SpringBoot常用" class="headerlink" title="SpringBoot常用"></a>SpringBoot常用</h3><p>这一部分我会为用到的注解贴个截图，一起回忆下上一节中我们在哪里用到了这个注解。</p>
<h4 id="SpringBootApplication"><a href="#SpringBootApplication" class="headerlink" title="@SpringBootApplication"></a>@SpringBootApplication</h4><p>最重要的注解，标记主应用程序类。</p>


<p>源码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@Target(ElementType.TYPE)</span><br><span class="line">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="line">@Documented</span><br><span class="line">@Inherited</span><br><span class="line">@SpringBootConfiguration</span><br><span class="line">@EnableAutoConfiguration</span><br><span class="line">@ComponentScan (excludeFilters = &#123; @Filter(type = FilterType.CUSTOM, classes = TypeExcludeFilter.class),@Filter(type = FilterType.CUSTOM, classes = AutoConfigurationExcludeFilter.class) &#125;)</span><br><span class="line">public @interface SpringBootApplication &#123;&#125;</span><br></pre></td></tr></table></figure>

<p>除开四个元注解，<code>SpringBootApplication</code>还有三个注解：</p>
<p><strong>@SpringBootConfiguration</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@Target(&#123;ElementType.TYPE&#125;)</span><br><span class="line">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="line">@Documented</span><br><span class="line">@Configuration</span><br><span class="line">@Indexed</span><br><span class="line">public @interface SpringBootConfiguration &#123;&#125;</span><br></pre></td></tr></table></figure>

<p>哎，没有<code>@Inherited</code>，这个还用可以标识注解，是我们刚才学的有问题吗？</p>
<p>刚才讲到的是<code>Java</code>中的情况，现在我们学习的是<code>SpringBoot</code>，有一点点差别。</p>
<p>在<code>SpringBoot</code>框架中，有一些为<code>SpringBoot</code>应用程序提供了元数据和配置信息的注解，他们可以看作<code>SpringBoot</code>的“元注解”，<code>@SpringBootConfiguration</code>和<code>@ComponentScan</code>便属于这一类。<code>@Indexed</code>优化查询性能的，可以用做元注解。</p>
<p>那么现在我们就知道<code>@SpringBootConfiguration</code>组合了<code>@Configuration</code>注解，实现配置文件的功能。再往上就不细究了。</p>
<p><strong>@EnableAutoConfiguration</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@Target(ElementType.TYPE)</span><br><span class="line">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="line">@Documented</span><br><span class="line">@Inherited</span><br><span class="line">@AutoConfigurationPackage</span><br><span class="line">@Import(AutoConfigurationImportSelector.class)</span><br><span class="line">public @interface EnableAutoConfiguration &#123;&#125;</span><br></pre></td></tr></table></figure>

<p>启用<code>SpringBoot</code>的自动配置机制，根据添加的依赖自动配置<code>Spring</code>应用。</p>
<p><strong>@ComponentScan</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="line">@Target(&#123;ElementType.TYPE&#125;)</span><br><span class="line">@Documented</span><br><span class="line">@Repeatable(ComponentScans.class)</span><br><span class="line">public @interface ComponentScan &#123;&#125;</span><br></pre></td></tr></table></figure>

<p><code>Spring</code>组件扫描功能，让<code>SpringBoot</code>扫描到<code>Configuration</code>类并把它加入到程序上下文。</p>
<p><code>@SpringBootApplication</code>结合了以上注解，提供了<code>SpringBoot</code>应用的标准配置。</p>
<h4 id="Service"><a href="#Service" class="headerlink" title="@Service"></a>@Service</h4><p>到这就能简单点了，<code>SpringBootApplication</code>是最重要的注解，所以篇幅比较长。</p>


<p><code>@Service</code>用于标记业务逻辑层（Service层）的类，将其纳入<code>Spring</code>容器管理，便于依赖注入和<code>AOP</code>切面编程。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@Target(&#123;ElementType.TYPE&#125;)</span><br><span class="line">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="line">@Documented</span><br><span class="line">@Component</span><br></pre></td></tr></table></figure>

<p>关于<code>@Component</code>：<code>Spring Framework</code>中的一个核心注解，用于定义一个受<code>Spring</code>容器管理的组件。当<code>@Component</code>注解添加到类上时，这个类就会被<code>Spring</code>识别为一个<code>Bean</code>。</p>
<h4 id="RestController"><a href="#RestController" class="headerlink" title="@RestController"></a>@RestController</h4><p>通常用于处理HTTP请求并直接返回数据。</p>


<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@Target(&#123;ElementType.TYPE&#125;)</span><br><span class="line">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="line">@Documented</span><br><span class="line">@Controller</span><br><span class="line">@ResponseBody</span><br></pre></td></tr></table></figure>

<p>在<code>@Controller</code>中除开Java元注解只有一个<code>@Component</code>，所以比较<code>@RestController</code>和<code>@Controller</code>的差别我们可以简单地看看<code>@ResponseBody</code></p>
<p><code>@Target</code>为<code>TYPE,METHOD</code>，作用是返回值将直接作为HTTP响应正文返回。</p>
<p><code>@Controller</code>通常返回视图名称，需要视图解析器来渲染HTML视图。</p>
<h4 id="Repository"><a href="#Repository" class="headerlink" title="@Repository"></a>@Repository</h4><p>标记数据访问层类，如DAO（Data Access Object），用于封装对数据库或其他持久化存储的操作。</p>
<p>这个比较重要，但是咱们还没用到，等用到了再说</p>
<h4 id="Autowired"><a href="#Autowired" class="headerlink" title="@Autowired"></a>@Autowired</h4><p>用于字段、方法或构造函数，实现依赖注入，自动装配<code>Spring</code>容器管理的<code>Bean</code>。</p>
<p>源码里除了元注解也没别的就不贴代码了。</p>


<p><strong>@RequestMapping</strong></p>
<p>用于定义 HTTP 请求和控制器中处理方法之间的映射关系。</p>


<p>四种特化版：<code>@GetMapping</code>、<code>@PostMapping</code>、<code>@PutMapping</code>、<code>@DeleteMapping</code></p>
<p>分别对应HTTP Get-Post-Put-Delete请求</p>
<h4 id="ExceptionHandler"><a href="#ExceptionHandler" class="headerlink" title="@ExceptionHandler"></a>@ExceptionHandler</h4><p> 在控制器类或<code>@ControllerAdvice</code>中定义全局或局部异常处理器方法。</p>


<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@Target(&#123;ElementType.METHOD&#125;)</span><br><span class="line">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="line">@Documented</span><br><span class="line">@Reflective(&#123;ExceptionHandlerReflectiveProcessor.class&#125;)</span><br></pre></td></tr></table></figure>

<p>这里出现了一个没提到的注解，去源码看看</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@Target(&#123;ElementType.ANNOTATION_TYPE, ElementType.TYPE, ElementType.CONSTRUCTOR, ElementType.FIELD, ElementType.METHOD&#125;)</span><br><span class="line">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="line">@Documented</span><br><span class="line">public @interface Reflective &#123;&#125;</span><br></pre></td></tr></table></figure>

<p>指示被注释的元素需要反射。当直接出现或作为元注释出现时，该注释会触发针对已注释元素的配置处理器。默认情况下，会为带注释的元素注册反射提示，以便在必要时发现和调用该元素。</p>
<h4 id="Around-Aspect-Before"><a href="#Around-Aspect-Before" class="headerlink" title="@Around&#x2F;@Aspect&#x2F;@Before"></a>@Around&#x2F;@Aspect&#x2F;@Before</h4><p>AOP（面向切面编程）相关注解，用于定义切面、切点和通知，实现横切关注点的分离。</p>
<p><code>@Around</code>：方法级别注解，用于定义一个方法拦截器，允许在方法的执行前后添加逻辑，并且可以控制方法的执行流程。</p>


<p><code>@Aspect</code>：类级别注解，用于声明一个类为切面<code>aspect</code>。</p>


<p><code>@Before</code>：用于在某个方法执行之前执行一些代码。</p>


<h4 id="ControllerAdvice"><a href="#ControllerAdvice" class="headerlink" title="@ControllerAdvice"></a>@ControllerAdvice</h4><p>用于定义全局或特定的异常处理器和数据预处理方法，集中处理控制器层<code>Controller</code>的异常。</p>


<h4 id="MapperScan"><a href="#MapperScan" class="headerlink" title="@MapperScan"></a>@MapperScan</h4><p><code>MyBatis-Plus</code>或<code>MyBatis-Spring</code>等框架使用的注解，用于指定扫描<code>Mapper</code>接口的包路径。</p>


<h4 id="NotBlank"><a href="#NotBlank" class="headerlink" title="@NotBlank"></a>@NotBlank</h4><p>数据校验注解，用于确保字符串非空且非空白，或对象非null。</p>


<h3 id="自定义注解"><a href="#自定义注解" class="headerlink" title="自定义注解"></a>自定义注解</h3><p>简单说一下自定义注解的格式，使用<code>@interface</code>关键字定义，使用<code>default</code>关键字为注解成员提供默认值，可以使用元注解来提供关于注解本身的信息。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">import java.lang.annotation.*;</span><br><span class="line"></span><br><span class="line">// 使用@Retention定义注解的保留策略</span><br><span class="line">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="line">// 使用@Target定义注解可以用于哪些元素（如类、方法、变量等）</span><br><span class="line">@Target(ElementType.METHOD)</span><br><span class="line">// 使用@Documented表明这个注解应该被Javadoc工具记录</span><br><span class="line">@Documented</span><br><span class="line">public @interface MyAnnotation &#123;</span><br><span class="line">    // 定义注解成员，可以有默认值</span><br><span class="line">    String value() default &quot;default value&quot;;</span><br><span class="line">    int number() default 10;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 使用格式</span><br><span class="line">public class MyClass &#123;</span><br><span class="line"></span><br><span class="line">    @MyAnnotation(value = &quot;Hello&quot;, number = 5)</span><br><span class="line">    public void myMethod() &#123;</span><br><span class="line">        // 方法体</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="END"><a href="#END" class="headerlink" title="END"></a>END</h3><p>这一章就简单学习了一下注解相关</p>
<p>元注解中关于继承——<code>@Inherited</code>学的很详细，因为查的时候查出来挺多内容的，就都记上了。</p>
<p><code>SpringBoot</code>中重点介绍了<code>@SpringBootApplication</code>这个最重要的注解，其他的都简单介绍了下。</p>
<p>未来还会使用到更多的注解，在实践中慢慢学习吧。</p>

    </div>

    
    
    

    <footer class="post-footer">
          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>本文作者： </strong>北斗
  </li>
  <li class="post-copyright-link">
      <strong>本文链接：</strong>
      <a href="http://example.com/2024/05/22/spring/" title="SpringBoot注解">http://example.com/2024/05/22/spring/</a>
  </li>
  <li class="post-copyright-license">
      <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

          <div class="post-tags">
              <a href="/tags/Java%E5%85%83%E6%B3%A8%E8%A7%A3/" rel="tag"># Java元注解</a>
              <a href="/tags/SpringBoot%E6%B3%A8%E8%A7%A3/" rel="tag"># SpringBoot注解</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2024/05/22/12306_P0/" rel="prev" title="仿12306 Part 00">
                  <i class="fa fa-angle-left"></i> 仿12306 Part 00
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2024/05/22/12306_P1/" rel="next" title="仿12306 Part 01">
                  仿12306 Part 01 <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">北斗</span>
  </div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  






  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>





</body>
</html>
